!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t=function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)},n=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},r={get:function(e){var t=localStorage.getItem(e);if(null===t)return t;try{return JSON.parse(t)}catch(e){return t}},set:function(e,t){localStorage.setItem(e,"string"==typeof t?t:JSON.stringify(t))},append:function(e,n){this.set(e,t(t({},this.get(e)||{}),n))},appendDiffTypes:function(r,i){var o=this.get(r);o?Array.isArray(o)&&Array.isArray(i)?this.set(r,n(n([],o,!0),i,!0)):"object"!==e(o)||"object"!==e(i)?this.set(r,i):this.set(r,t(t({},o),i)):this.set(r,i)},remove:function(e){localStorage.removeItem(e)},clear:function(){localStorage.clear()},getAnswers:function(){return this.get("answers")||{}},storeMarketingInfo:function(){this.storeUtmParams(window.location.search),this.storeLastUtmParams(window.location.search),this.storeScreenResolution(window.screen.width,window.screen.height,window.devicePixelRatio)},storeScreenResolution:function(e,t,n){this.append("marketing",{screen:{width:e*n,height:t*n}})},storeUtmParams:function(e){var t=this.parseUtmParams(e);Object.keys(t).length&&void 0===this.getMarketingInfo("utmParams")&&this.append("marketing",{utmParams:t})},storeLastUtmParams:function(e){var t=this.parseUtmParams(e);Object.keys(t).length&&(t.utm_creative=t.utm_creative||this.getMarketingInfo("utmParams").utm_creative,this.append("marketing",{lastUtmParams:t}))},parseUtmParams:function(e){return e.substring(1).split("&").filter((function(e){return e.startsWith("utm")})).map((function(e){return e.split("=").map(decodeURIComponent)})).reduce((function(e,n){var r,i=n[0],o=n[1];return t(t({},e),((r={})[i]=o,r))}),{})},getMarketingInfo:function(e){void 0===e&&(e=null);var t=this.get("marketing")||{};return e?t[e]:t},storeCustomerUuid:function(e){var t=new URLSearchParams(window.location.search),n=t.get("cid")||t.get("customerUuid")||e;this.getCustomerUuid()||this.setCustomerUuid(n)},setCustomerUuid:function(e){this.set("__cid",e)},getCustomerUuid:function(){return this.get("__cid")||""},setEventId:function(e){this.set("__eid",e)}},i=r;function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}window.store=r,window.performance&&2===window.performance.navigation.type&&window.location.reload(),navigator.onLine&&setTimeout((function(){window.location.reload()}),864e5);var c=function(){return U("currentPurchaseUuid")?U("currentPurchaseUuid"):U("uuid")},u=function(){window.replaceSearchParams("customerUuid",i.getCustomerUuid());var e=document.getElementsByClassName("js-get-it-now-button");if(e.length){var t,n=a(e);try{for(n.s();!(t=n.n()).done;){t.value.setAttribute("href",window.getCheckoutUrl())}}catch(e){n.e(e)}finally{n.f()}}},d=function(e,t){var n=i.getAnswers();n[e]=t,i.set("answers",n)},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=i.get("resendFormVisibilityPerDiet")||{};return e?t[e]:t},m=function(e,t){if(e&&t){var n=i.getAnswers();n.data||(n.data={}),n.data[e]=t,i.set("answers",n)}},w=function(){var e=window.location;return"https://"+e.hostname+(e.port?":"+e.port:"")},f=navigator.userAgent.toLowerCase(),h=f.indexOf("android")>-1&&(f.indexOf("mobile")>-1||-1===f.indexOf("chrome")),g=f.match("crios"),p=f.indexOf("mobile")>-1&&-1!==f.indexOf("chrome"),y=/ipad|iphone|ipod/.test(f)&&!window.MSStream;String.prototype.insertBeforeLastOccurrence=function(e,t){var n=this.lastIndexOf(e);if(n>-1)return this.substring(0,n)+t+this.substring(n)};var v=navigator.userAgent.match(/MSIE 10/i),b=/Trident.*rv:/.test(navigator.userAgent),S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"build",value:function(){return"".concat(w(),"/").concat(this._joinWithSlashes.apply(this,arguments))}},{key:"cdn",value:function(){return"".concat(this._trimSlashes(backEndVars.cdn),"/").concat(this._joinWithSlashes.apply(this,arguments))}},{key:"redirectTo",value:function(){window.location.href=this.build.apply(this,arguments)}},{key:"redirectAfter",value:function(e){var t=this;setTimeout((function(){window.location.href=t.build(e)}),3500)}},{key:"_ensureString",value:function(e){return"".concat(e)}},{key:"_trimSlashes",value:function(e){return this._ensureString(e).replace(/(^\/*|\/*$)/g,"")}},{key:"_joinWithSlashes",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.map((function(t){return e._trimSlashes(t)})).join("/")}}],n&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),U=function(e){return i.getAnswers().data?i.getAnswers().data[e]:""},k=function(e){var t="";switch(e){case"stripe":case"stripe-elements":case"stripe-pay-button":t="stripe";break;case"paypal-old":case"paypal-smart-button":t="paypal";break;case"braintree":t="braintree";break;case"primer":t="primer"}return t},A=function(e,t,n){return e.plans.find((function(e){return e.provider===k(t)&&e.billingOptionType===n}))},P=function(e){window.dataLayer=window.dataLayer||[],dataLayer.push(e)},E=function(){var e=new URLSearchParams(window.location.search),t=new RegExp("products/([0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12})/upsales").exec(window.location.pathname);return t&&(t=t[1]),t||e.get("cid")||e.get("customerUuid")||i.getCustomerUuid()||U("customer_uuid")||backEndVars.customerUuid},L=function(){var e=new URLSearchParams(window.location.search);return e.get("uuid")||e.get("purchasableUuid")||c()||backEndVars.purchasableUUID},I=function(){return window.getHost()+"/final?customerUuid=".concat(E(),"&uuid=").concat(L(),"#get-plan")};window.clearUserData=function(){var e=i.getAnswers(),t=["measurements","bodyClass","data"];for(var n in e)t.includes(n)||delete e[n],"data"===n&&(delete e[n].can_generate,delete e[n].measurement,delete e[n].uuid,delete e[n].temporary_code,i.set("answers",e))},window.createPaymentInfo=function(e,t){var n=A(e.planDetails,t,e.planDetails.type),r=backEndVars.paymentDetails[backEndVars.boxSequence]||backEndVars.paymentDetails;return{customerUuid:window.getCustomerUuid(),purchase:{type:e.type,purchasable:{id:e.id,type:e.slug},bundleProducts:e.bundleProducts,finalPrice:{amount:r.price?r.price.amount:r.planDetails.additionalDetails[0].totalAmount,currency:r.price?r.price.currency:r.planDetails.additionalDetails[0].currency}},subscriptionPlan:n.planId,planId:n.planId,planType:e.planDetails.type}},window.createPayPalCustomField=function(e,t,n,r,i){return e+"|$|"+t+"|$|"+n+"|$|"+r+"|$|"+i.join("$$$")},window.failedPayments=function(e,t){var n=i.getAnswers().failedPayments||[];n.push(e),d("failedPayments",n),d("showPaymentError",t||!0)},window.getAnswersData=U,window.getCurrentPurchaseUuid=c,window.getFingerprint=function(){return i.get("fingerprint")?i.get("fingerprint"):[]},window.getHost=w,window.getProviderType=k,window.getResendFormVisibility=l,window.hasToOpenDiscount=function(){var e=localStorage.getItem("discountExpiration"),t=localStorage.getItem("paymentInit"),n=localStorage.getItem("discountSeen");return("keto-v3"===backEndVars.design||"light-green"===backEndVars.design||"light-pink-blue"===backEndVars.design||"ruby-sky"===backEndVars.design||"misty-peach"===backEndVars.design||"grey-haze"===backEndVars.design)&&backEndVars.discountData&&!backEndVars.discountData.pageIsDiscount&&!!backEndVars.discountData.discountSlug&&!e&&!!t&&!n},window.hasUtmParams=function(e){return 0!=e.substring(1).split("&").filter((function(e){return e.startsWith("utm")})).length},window.isAndroidMobile=h,window.isChromeMobileIOS=g,window.isChromeMobileAndroid=p,window.isIE10=v,window.isIE11=b,window.isIOSMobile=y,window.isNewestIos=function(){var e=f.match(/os (\d{1,})_\d/);return!!e&&(y&&e[1]>11)},window.loadScript=function(e,t){var n=document.createElement("script");n.type="text/javascript",n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,t())}:n.onload=function(){t()},n.src=e,document.getElementsByTagName("head")[0].appendChild(n)},window.pushGTMDataLayer=P,window.redirectToURL=function(e,t){if("downsale"===backEndVars.checkoutOffer){$(".".concat(t," .js-paypal-loader")).fadeOut();var n=$("#flash-message-modal");"paypal-smart-button"!=t&&(e=n.data("redirect-url")),n.show()}setTimeout((function(){"-1"==e.indexOf("https")?window.location.href=e:window.location=e}),3500)},window.removeAnswer=function(e){var t=i.getAnswers();delete t[e],i.set("answers",t)},window.removeAnswersData=function(){var e=i.getAnswers();delete e.data,i.set("answers",e)},window.removeFingerprint=function(){i.set("fingerprint",[])},window.removeMarketingInfo=function(){i.remove("marketing")},window.resultSliderSettings={variableWidth:!1,slidesToShow:2,dots:!1,prevArrow:!1,nextArrow:!1,responsive:[{breakpoint:1024,settings:{slidesToShow:1,variableWidth:!1}},{breakpoint:768,settings:{slidesToShow:1,variableWidth:!1,dots:!0}}]},window.searchAdditionsDetailsByProvider=function(e,t){return e.additionalDetails.find((function(e){return e.provider===k(t)}))},window.searchPlanDetailsByProviderAndBillingOption=A,window.searchProviderDetailsByProvider=function(e,t){return e.initializationDetails.find((function(e){return e.provider===k(t)}))},window.setAnswer=d,window.setAnswersDataKey=m,window.setCurrentCustomerProductUuidWhenOfferIsDownsale=function(){"downsale"==backEndVars.checkoutOffer&&(m("customer_uuid",backEndVars.customerUuid),m("uuid",backEndVars.purchasableUUID))},window.setCurrentPurchaseUuid=function(e){if(e){var t=i.getAnswers();t.data||(t.data={}),t.data.currentPurchaseUuid=e,i.set("answers",t)}},window.setFingerprint=function(e){i.set("fingerprint",e)},window.setPurchasableUuidInGetItNowButton=function(){u()},window.setResendFormVisibility=function(e,t){var n=l();n[e]=t,i.set("resendFormVisibilityPerDiet",n)},window.setRightCustomerUuidOnGetItNowButtonWhenLoadFromCache=function(){window.addEventListener("pageshow",(function(e){e.persisted&&u()}))},window.setUUID=function(e){if(e){var t=i.getAnswers();t.data||(t.data={}),t.data.uuid=e,i.set("answers",t)}},window.toDecimal=function(e){return parseFloat(e).toFixed(1)},window.trackEventInGTM=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){"PageView"===e.eventType?i.setEventId(e.id):P({event:e.type,eventID:e.id})}))},window.Url=S,window.urlContainsUUID=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.pathname,t=RegExp(window.backEndVars.systemType+"/[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}");return t.test(e)},window.purchasablePath=function(){var e,t=new URL(window.location.pathname,window.location.origin);return t.searchParams.append("customerUuid",window.getCustomerUuid()),t.searchParams.append("uuid",null!==(e=backEndVars.purchasableUUID)&&void 0!==e?e:window.getUuid()),backEndVars.promoCode&&t.searchParams.append("promoCode",backEndVars.promoCode),t.toString()},window.replaceSearchParams=function(e,t){var n=new URL(window.location.href,window.location.origin);n.searchParams.has(e)&&(n.searchParams.set(e,t),history.replaceState(null,null,n.toString()))},window.getCustomerUuid=E,window.setCustomerUuid=function(e){this.replaceSearchParams("cid",e),this.replaceSearchParams("customerUuid",e),i.setCustomerUuid(e),U("customer_uuid")&&m("customer_uuid",e)},window.getFinalUrl=I,window.getUuid=L,window.redirectToFinalPage=function(){window.location.href=I()},window.getCheckoutUrl=function(){return window.getHost()+"/checkout?customerUuid=".concat(E(),"&uuid=").concat(L())},window.setCheckoutUrl=u,window.moveToNextUrl=function(){var e=i.get("nextUrl");window.location=e||"/"},window.currentProductAlreadyPurchased=function(){return i.get("productsPaid")&&i.get("productsPaid").includes(backEndVars.purchasableType)&&!window.location.href.includes("downsale")};var j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.getBoundingClientRect(),r=n.top,i=n.bottom;return r+t>=0&&i-t<=(window.innerHeight||document.documentElement.clientHeight)};var D;function C(){var e,t,n,r=document.querySelectorAll(".bmi-animations"),i=(e=getAnswersData("bmi"))<=18?"underweight":e>18&&e<=25?"normal":e>25&&e<=30?"overweight":e>30&&e<=35?"obesity-one":e>35&&e<=40?"obesity-two":"obesity-three",o=Number(U("bmi")).toFixed(1);"underweight"===i?(t="bmi-phase-1",n="bmi-underweight"):"normal"===i?(t="bmi-phase-2",n="bmi-normal"):"overweight"===i?(t="bmi-phase-3",n="bmi-overweight"):(t="bmi-phase-4",n="obesity-one"===i?"bmi-obesity-one":"obesity-two"===i?"bmi-obesity-two":"bmi-obesity-three"),r.forEach((function(e){e.id!==t?e.remove():(document.querySelector("#".concat(e.id,"-tspan1")).innerHTML=o,document.querySelector(".".concat(n)).classList.remove("none"))}))}function T(){var e,t=document.querySelectorAll(".js-metabolic"),n=Number(U("metabolic_age")),r=Number(U("age")?U("age"):!(!Object.values(store.getAnswers())||!store.getAnswers().measurements)&&Object.values(store.getAnswers().measurements)[0].value)||0;e=r<n?"metabolic-age-phase-1":r===n?"metabolic-age-phase-2":"metabolic-age-phase-3",t.forEach((function(t){t.id!==e?t.remove():(t.classList.add(e),document.querySelector("#meta-phase-1").innerHTML=n,document.querySelector("#meta-phase-2").innerHTML=store.get("age-range")||backEndVars.ageRange||r)}))}var O=!0;function M(){var e=document.querySelector(".lower-view"),t=isAndroidMobile||isIOSMobile;e?t?document.querySelectorAll(".summary-item").forEach((function(e){j(e,200)&&e.querySelectorAll(".hidden").forEach((function(e){return e.classList.remove("hidden")}))})):document.querySelectorAll(".js-animation-row").forEach((function(e){j(e,456)&&e.querySelectorAll(".hidden").forEach((function(e){return e.classList.remove("hidden")}))})):document.querySelectorAll(".js-animation").forEach((function(e){j(e.parentNode,200)&&O&&e.parentNode.querySelectorAll(".hidden").forEach((function(e){return e.classList.remove("hidden")}))}))}null===(D=document.querySelector(".js-scroll"))||void 0===D||D.addEventListener("click",(function(){O=!1,setTimeout((function(){O=!0}),1500)})),document.addEventListener("scroll",(function(){M()})),document.addEventListener("DOMContentLoaded",(function(){var e,t,n,r,i,o,a;C(),t=document.querySelectorAll(".js-cal"),n=document.querySelector(".js-calories-from"),r=document.querySelector(".js-calories-to"),i=U("calories"),o=U("calories_from"),a=U("calories_to"),e=i<1250?"calories-phase-1":i>=1250&&i<2500?"calories-phase-2":i>=2500&&i<3750?"calories-phase-3":"calories-phase-4",t.forEach((function(t){t.id!==e?t.remove():(n.innerHTML=o,r.innerHTML=a,document.querySelector("#".concat(t.id,"-tspan4")).innerHTML="".concat(o," - ").concat(a))})),T(),document.querySelectorAll(".js-help-btn").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),e.target.closest(".m-item-summary")?e.target.closest(".m-item-summary").classList.toggle("m-item-summary--active"):e.target.closest(".summary-item")&&e.target.closest(".summary-item").classList.toggle("m-item-summary--active"),e.target.closest(".js-summary-item")&&e.target.closest(".js-summary-item").classList.toggle("active-help")}))})),function(){var e=U("recommended_water"),t=Math.floor(e)>4?4:Math.floor(e),n=(+e-Math.floor(e)).toFixed(1)>0&&t<4,r=document.querySelectorAll(".single-bottle");if(0!==r.length){for(var i=0;i<t;i++)o(r[i],"full");n&&o(r[t])}function o(e,t){var n=e.querySelector("span");"full"==t?(n.style.animation=".9s bottle",n.style.animationFillMode="forwards"):e.classList.add("single-bottle--semifilled")}}(),M(),function(){var e,t,n,r,i,o,a=document.querySelectorAll(".js-measurement-unit"),s=0===Object.entries(store.getAnswers()).length;if(0!==a.length&&!s){var c=(null===(e=U("weight"))||void 0===e?void 0:e.unit)||(null===(t=store.getAnswers())||void 0===t||null===(n=t.measurements[0])||void 0===n?void 0:n.unit)||"kg";a.forEach((function(e){return e.innerHTML=" "+c}));var u=Number(null===(r=U("weight"))||void 0===r?void 0:r.value)||Number(null===(i=store.getAnswers())||void 0===i||null===(o=i.measurements[0])||void 0===o?void 0:o.value)||63,d=Number(U("achievable_weight")),l=(p="keep",(h=u)>(g=d)&&(p="loose"),h<g&&(p="gain"),document.querySelector(".js-weight-data").classList.add(p),{keep:"js-keep-weight",loose:"js-loose-weight",gain:"js-gain-weight"}[p]);document.querySelectorAll(".js-weight").forEach((function(e){return!e.classList.contains(l)&&e.remove()}));var m=document.querySelector(".js-weight-from"),w=document.querySelector(".js-weight-to"),f=document.querySelector(".js-achievable-weight");m&&(m.innerHTML=u.toFixed(1)),w&&(w.innerHTML=d.toFixed(1)),f&&(f.innerHTML=d.toFixed(1))}var h,g,p}()}))}();